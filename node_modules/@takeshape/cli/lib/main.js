"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

var _saga = require("./saga");

const commandPath = {
  build: 'build-or-watch',
  watch: 'build-or-watch',
  init: 'init',
  deploy: 'deploy',
  schema: 'schema',
  status: 'status',
  import: 'import',
  export: 'export'
};

async function _default(command, params, cli) {
  const path = commandPath[command];

  if (path) {
    const fn = require(`./commands/${path}`).default;

    let result;
    const hasFlags = ['import', 'export'].includes(command);

    if (hasFlags) {
      result = fn(command, params, cli.flags);
    } else {
      result = fn(command, params);
    }

    await ((0, _saga.isGenerator)(result) ? (0, _saga.runSaga)(result) : result);
  } else {
    console.log('No such command:' + cli.help);
  }
}