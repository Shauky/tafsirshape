import { shouldCompress, gzip } from '@takeshape/util';
export default function gzipContents(renderTemplate) {
  return async (path, template, context) => {
    const item = await renderTemplate(path, template, context);

    if (shouldCompress(item.path)) {
      return {
        path: item.path,
        contents: await gzip(item.contents)
      };
    }

    return item;
  };
}