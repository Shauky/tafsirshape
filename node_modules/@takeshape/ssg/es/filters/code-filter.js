import Prism from 'prismjs';
import { runtime } from '@takeshape/vm-nunjucks';
import 'prismjs/components/prism-javascript';
import 'prismjs/components/prism-markup';
import 'prismjs/components/prism-markup-templating';
import 'prismjs/components/prism-css';
import 'prismjs/components/prism-bash';
import 'prismjs/components/prism-django';
import 'prismjs/components/prism-twig';
import 'prismjs/components/prism-yaml';
import 'prismjs/components/prism-graphql';
import 'prismjs/components/prism-sass';
import 'prismjs/components/prism-scss';
import 'prismjs/components/prism-markdown';
import 'prismjs/components/prism-json';
const {
  SafeString
} = runtime;
export default function codeFilter(value, languageString) {
  const language = Prism.languages[languageString];

  if (language) {
    const cssClass = '"language-' + languageString + '"';
    const openingTags = '<pre class=' + cssClass + '><code class=' + cssClass + '>';
    const closingTags = '</code></pre>'; // @ts-ignore Prism.highlight type is inaccurate

    const highlightedCode = Prism.highlight(value, language);
    return new SafeString(openingTags + highlightedCode + closingTags);
  }

  return value;
}