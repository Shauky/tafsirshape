"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = codeFilter;

var _prismjs = _interopRequireDefault(require("prismjs"));

var _vmNunjucks = require("@takeshape/vm-nunjucks");

require("prismjs/components/prism-javascript");

require("prismjs/components/prism-markup");

require("prismjs/components/prism-markup-templating");

require("prismjs/components/prism-css");

require("prismjs/components/prism-bash");

require("prismjs/components/prism-django");

require("prismjs/components/prism-twig");

require("prismjs/components/prism-yaml");

require("prismjs/components/prism-graphql");

require("prismjs/components/prism-sass");

require("prismjs/components/prism-scss");

require("prismjs/components/prism-markdown");

require("prismjs/components/prism-json");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const {
  SafeString
} = _vmNunjucks.runtime;

function codeFilter(value, languageString) {
  const language = _prismjs.default.languages[languageString];

  if (language) {
    const cssClass = '"language-' + languageString + '"';
    const openingTags = '<pre class=' + cssClass + '><code class=' + cssClass + '>';
    const closingTags = '</code></pre>'; // @ts-ignore Prism.highlight type is inaccurate

    const highlightedCode = _prismjs.default.highlight(value, language);

    return new SafeString(openingTags + highlightedCode + closingTags);
  }

  return value;
}